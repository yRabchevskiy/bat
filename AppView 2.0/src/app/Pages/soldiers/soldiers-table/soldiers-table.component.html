<p-table class="table" #st [value]="soldiers" [scrollable]="true" scrollHeight="100%" dataKey="_id"
  [globalFilterFields]="['name.first_name', 'name.last_name', 'name.middle_name', 'editional_data.position']"
  [rows]="10" [rowsPerPageOptions]="[10, 25, 50]" [loading]="loading" [paginator]="true">
  <ng-template pTemplate="caption">
    <div class="table_action_row">
      <a class="app_action_link" routerLink="../create" routerLinkActive="home-link-active">Додати</a>
      <input class="app_table_input" type="text" (input)="globalFilter(st, $event)"
        placeholder="Пошук" />
    </div>

  </ng-template>
  <ng-template pTemplate="header">
    <tr>
      <th style="width: 40px"></th>
      <th style="width: 60px">№</th>
      <th>ПІБ</th>
      <th style="width: 120px">Дата народження</th>
      <th style="width: 160px">Телефон:</th>
      <th style="width: 160px">Звання</th>
      <th style="width: 160px">Посада</th>
      <th></th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-item let-rowIndex="rowIndex" let-expanded="expanded">
    <tr>
      <td>
        <!-- <p-button
          type="button"
          pRipple
          [pRowToggler]="item"
          [icon]="expanded ? 'Open' : 'Close'"
        /> -->
        <app-svg-icon [pRowToggler]="item" path="url(assets/icons/arrow-right.svg)"
          [ngClass]="expanded ? 'expanded' : 'collapsed'" />
      </td>
      <td>{{ rowIndex + 1 }}</td>
      <td>{{ item.name.last_name }} {{ item.name.first_name }} {{ item.name.middle_name }}</td>
      <td>{{ item.birthday | date : "dd/MM/yyyy" }}</td>
      <td>{{ item.phone }}</td>
      <td>{{ item.rank && item.rank.length ? item.rank[item.rank.length - 1].value : '' }}</td>
      <td>{{ item.editional_data.position }}</td>
      <td>
        <!-- <app-icon-btn (onClick)="openModalWindow('visit', item)" svgIconPath="url('assets/icons/visit.svg')" />
        <app-icon-btn (onClick)="openModalWindow('vlk', item)" svgIconPath="url('assets/icons/vlk.svg')" /> -->
        <app-font-btn (onClick)="deleteSoldier(item)" icon="bxs-trash" />
      </td>
    </tr>
  </ng-template>
  <ng-template pTemplate="rowexpansion" let-item>
    <tr>
      <td colspan="7">
        <div class="expanded_row_wrapper">
          <div class="expanded_row">
            <span class="expanded_row_label">Підрозділ:</span>
            <span class="expanded_row_value">{{
              item.editional_data.unit
              }}</span>
          </div>
          <div class="expanded_row">
            <span class="expanded_row_label">Місце проживання:</span>
            <span class="expanded_row_value">{{
              item.editional_data.address
              }}</span>
          </div>
          <!-- <div class="expanded_row">
            <span class="expanded_row_label">Дата призову:</span>
            <span class="expanded_row_value">{{
              item.editional_data.summoned_date | date : "dd/MM/yyyy"
              }}</span>
          </div>
          <div class="expanded_row">
            <span class="expanded_row_label">Призваний:</span>
            <span class="expanded_row_value">{{
              item.editional_data.summoned
              }}</span>
          </div> -->
          <div class="expanded_row">
            <span class="expanded_row_label">Група крові:</span>
            <span class="expanded_row_value">{{
              item.editional_data.blood_type
              }}</span>
          </div>
          <div class="expanded_row">
            <span class="expanded_row_label">Стать:</span>
            <span class="expanded_row_value">{{
              item.editional_data.sex_type
              }}</span>
          </div>
          <div class="expanded_row" *ngIf="item.editional_data.description">
            <span class="expanded_row_label">Додаткова інформація:</span>
            <span class="expanded_row_value">{{
              item.editional_data.description
              }}</span>
          </div>
        </div>
      </td>
    </tr>
  </ng-template>
</p-table>